<!DOCTYPE html>
<html>
<head>
<title>Calculator Application</title>
<link rel="stylesheet" type="text/css" href="style.css">
<!-- <script src="./connectPython.js"></script> -->
</head>
<body>

<div class='calculator'>
    <h1>Eternity</h1>
</div>

<div class='main'>

    <script>
        // function to add character based on what button was pressed
        function addToExpression(i){
            document.getElementById('resultInput').value = document.getElementById('resultInput').value + i;
        }

        // function to clear the input field
        function clearInput() { document.getElementById('resultInput').value = '' }

        // function to delete the last character inputted
        function del() { 
            str = document.getElementById('resultInput').value;
            document.getElementById('resultInput').value = str.substring(0, str.length - 1)
        }

        // function to send a request to node to run the python command for calculating the result of the expression
        async function calc() {
            // gets the input from teh textbox
            const input = { expression: document.getElementById('resultInput').value };

            // calls node to perform the calculation over the route
            const response = await fetch(`http://localhost:3000/math`, {
                method: 'POST',
                body: JSON.stringify(input),
                headers: {
                    'content-type': 'application/json'
                }
            });
            const json = await response.json();

            // Sets the answer in the input text
            document.getElementById('resultInput').value = json.answer;
        }

    </script>
    <!-- <div class='input'>> {% if expression %}{{expression}}{% endif %}</div> -->
    <!-- <div class='output'>= {% if result %}{{result}}{% endif %}</div> -->

    <!-- <form action="/" method="POST">  -->
        <input id="resultInput" type="text" style="width: 210px" name="calc" value="" /> 
        <br/><br/>
    
        <table>
            <tr>
                <td><button onclick="clearInput()" class='special' id='1'>AC</button></td>
                <td onclick="del()"><button class='special' id='a'>DEL</button></td>
                <td onclick="addToExpression('%')"><input type="submit" name="io" class="operator" value="%" /></td>
                <td onclick="addToExpression('(')"><input type="submit" name="io" class="operator" value="(" /></td>
                <td onclick="addToExpression(')')"><input type="submit" name="io" class="operator" value=")" /></td>
            </tr>
            <tr>
                <td onclick="addToExpression(7)"><input type="submit" name="io" class="number" value="7" /></td>
                <td onclick="addToExpression(8)"><input type="submit" name="io" class="number" value="8" /></td>
                <td onclick="addToExpression(9)"><input type="submit" name="io" class="number" value="9" /></td>
                <td onclick="addToExpression('^')"> <input type="submit" name="io" class="operator" value="^" /></td>
                <td> <input style="background-color: red;" type="submit" name="io" class="operator" value="√" /></td>
            </tr>
            <tr>
                <td onclick="addToExpression(4)"><input type="submit" name="io" class="number" value="4" /></td>
                <td onclick="addToExpression(5)"><input type="submit" name="io" class="number" value="5" /></td>
                <td onclick="addToExpression(6)"><input type="submit" name="io" class="number" value="6" /></td>
                <td onclick="addToExpression('/')"><input type="submit" name="io" class="operator" value="/" /></td>
                <td onclick="addToExpression('*')"><input type="submit" name="io" class="operator" value="*" /></td>
            </tr>
            <tr>
                <td onclick="addToExpression(1)"><input type="submit" name="io" class="number" value="1" /></td>
                <td onclick="addToExpression(2)"><input type="submit" name="io" class="number" value="2" /></td>
                <td onclick="addToExpression(3)"><input type="submit" name="io" class="number" value="3" /></td>
                <td onclick="addToExpression('-')"><input type="submit" name="io" class="operator" value="-" /></td>
                <td onclick="addToExpression('+')"><input type="submit" name="io" class="operator" value="+" /></td>
            </tr>
            <tr>
                <td onclick="calc()" colspan='2'><input type="submit" class="special" value="=" style='width:80px;border-radius:35%' /></td>
                <td onclick="addToExpression(0)"><input type="submit" name="io" class="number" value="0" /></td>
                <td onclick="addToExpression('.')"><input type="submit" name="io" class="number" value="." /></td>
                <td><input style="background-color: red;" type="submit" name="io" class="number" value="π" /></td>
            </tr>
        </table>
    <!-- </form> -->

    

</div>

</body>
</html>